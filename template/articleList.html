<!-- login.html is an index page -->

<!-- Embed the head.html here -->
{{ template "header.html" .}}

<!-- Content Start -->
{{$currentUserID := .userID}}
{{$page := .page}}
{{$articles := $page.Articles}}
<div class="pure-group">
    <h1>歡迎回來使用者"{{.username}}"</h1>
    <button id="showCreatePaneButton" class="pure-button-active" onclick="showCreatePane()">新文章</button>
    <form hidden action="create/" method="POST" id="createArticlePane">
        <input name="title" type="text" placeholder="輸入標題">
        <input name="content" type="text" placeholder="寫點什麼吧~">
        <input type="submit" value="建立">
    </form>
    
</div>
<ul>
    {{range $articles}}                 
    <li><div>標題:{{.Title}}</div>
        <div>時間:{{.EditTime}}</div>
        <p class="pure.pure-form-stacked">
            {{ .Content}}
        </p>
        <!-- 改用RESTful風格撰寫API -->
        {{if eq .UserID $currentUserID}}
        <a href="edit?articleID={{.ArticleID}}">編輯</a>
        {{end}}

    </li>
    {{end}}
</ul>
<!-- 文章分頁(導向不同分頁的連結) -->
<div id="pageLink" class="pure.pure-menu">
    {{range $page.AnotherPageIndices}}
        <div class="pure.pure-menu-item"><a href="list?pageIndex={{.}}&pageSize={{$page.PageSize}}">{{.}}</a></div>
    {{end}}
</div>
<script defer>
    function showCreatePane() {
        var createPane = document.getElementById("createArticlePane")
        var btn = document.getElementById("showCreatePaneButton")
        if (createPane.hidden) {
            btn.innerText = "取消新文章"
        } else {
            btn.innerText = "新文章"
        }
        createPane.hidden = !createPane.hidden
    }
</script>

<!-- Embed the footer.html here -->
{{ template "footer.html" .}}