<!-- login.html is an index page -->

<!-- Embed the head.html here -->
{{ template "header.html" .}}

<!-- Content Start -->
{{$currentUserID := .userID}}
{{$page := .page}}
{{$articles := $page.Articles}}

<div class="pure-group">
    <!-- 編輯新文章區塊 -->
    {{template "articleCreate"}}    
</div>
<ul>
    {{range $articles}}                 
    
    <li>
        <form id="article{{.ArticleID}}" class="pure-form-stacked">
            <div>標題:{{.Title}}</div>
            {{if .Username }}
            <div>作者:{{.Username}}</div>
            {{ else}}
            <div> <strike>作者已被刪除</strike></div>
            {{end}}
            <div>時間:{{.EditTime}}</div>
            <textarea disabled name="content" cols="30" rows="3" placeholder="寫點什麼吧~">{{.Content}}</textarea>
        </form>
        
        {{if eq .UserID $currentUserID}}
            <!-- 編輯articleID文章區塊 -->
            {{template "articleEdit" .}}
            <!-- 刪除articleID文章區塊 -->
            {{template "articleDelete" .}}
        {{end}}

    </li>
    {{end}}
</ul>
<!-- 底部文章頁面連結(導向不同頁數1.2.3.4...) -->
<div id="pageLink" class="pure.pure-menu">
    {{range $page.AnotherPageIndices}}
        <div class="pure.pure-menu-item">
            {{if ne . $page.CurrentIndex}}
            <a href="list?pageIndex={{.}}&pageSize={{$page.PageSize}}">{{.}}</a>
            {{else}}
            <a>{{.}}</a>
            {{end}}
        </div>
    {{end}}
</div>
<!-- JS -->
<script src="js/articleList.js" defer></script>

<!-- Embed the footer.html here -->
{{ template "footer.html" .}}